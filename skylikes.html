    <!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>Plotting friends</title>
            
            <link rel="stylesheet" type="text/css" href="css/normalize.css" />
            <link rel="stylesheet" type="text/css" href="css/style.css" />
            <script src="lib/d3.min.js" charset="utf-8"></script>
            <script src="js/jquery-2.1.3.js"></script>
            <script src="js/xsltTransform.js"></script>
            <script src="js/importFriends.js"></script>
            <meta name = "viewport" content = "initial-scale = 1, user-scalable = no">
            <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
            <meta content="utf-8" http-equiv="encoding">
        </head>
        <!-- include librearies -->
        <body>
            <img id="logo" src="skylikes-logos.png"/>
            <div id="gradient"></div>
            <svg></svg>
            <div id="tooltip" class="hidden">
                <img id="avatar" src="https://d.gr-assets.com/users/1424464367p3/40485151.jpg" />
                <section>
                <h2><span id="name"></span></h2>
                <p>Total books read: <span id="total"></span></p>
                <p>Books in common: <span id="common"></span></p>
                <!-- <p>Most read genre: <span>fiction </span></p> -->
                <p>Closest star: <span id="closeFriend"></span></p>
                </section>
            </div>
            <div id="bookTooltip" class="hidden" >
                <h2><span id="title"></span></h2>
                <p>Author: <span id="author"></span></p>
                <p>Friends who read: <span id="noFriends"></span></p>
                <!-- <p>Most read genre: <span>fiction </span></p> -->
                <p>Your rating: <span id="rating"></span></p>
                <p>Goodreads rating: <span id="goodReads"></span></p>
                
            </div>

            <div id="shelf" class="containerOuter">
                <div class="containerInner">
               
                </div><!--inner container-->
            </div><!-- outer container-->

            <script>
            d3.select("#tooltip").on("click", function() {
                //Hide the tooltip
                d3.select("#tooltip").classed("hidden", true);  
                      
                })
            var lastSelected ;
            d3.json("xslt/DiannasBooks.json",function(error,data){
                 if (error) {  //If error is not null, something went wrong.
                    console.log("error:" + error);  //Log the error.
                    } else {      //If no error, the file loaded correctly. Yay!
                      console.log(data);   //Log the data.
                      //Include other code to execute after successful file load here
                   
                    data.sort(function(a, b){return d3.descending(a.date_added, b.date_added);}); 

                    var divContainer = d3.select(".containerInner");
                    var myBooks = divContainer.selectAll(".book")
                        .data(data);
                    console.log("number of books: " + data.length);
                    var container_height = 117 * data.length;
                    $(".containerInner").css("height", container_height);
                    var newBookLink = myBooks.enter()
                        .append("div")
                        .attr("class", "book")

                        .append("a")
                        .attr("href", "#");
                    newBookLink.append("img")
                        .attr("id", function(d, i){return "b" + i})
                        .attr("src", function(d) {
                                return d.image_url;})
                        .attr("alt", function(d) {return d.title;})
                        .attr("title", function(d) {return d.title;})
                    .on("click", function(d, i) {
                       var $this = $(this);
                       console.log("current:" + i);
                       console.log("last selected:" + lastSelected);

                        if (i===lastSelected) {
                            // already been clicked once, hide it
                            d3.select(this).style("background", "rgba(242, 241, 239, 0)")
                            d3.select("#bookTooltip").classed("hidden", true);
                        }else {
                            d3.select("#b" + lastSelected).style("background", "rgba(242, 241, 239, 0)")
                            lastSelected = i;
                            //Get this bar's x/y values, then augment for the tooltip  
                            // var yPosition = d3.select(this).clientY ;
                            // console.log(yPosition);

                            //Update the tooltip position and value
                            d3.select("#bookTooltip")
                              // .style("top", window.outerHeight - yPosition + "px")
                              .select("#title")
                              .text(d.title);
                            d3.select("#bookTooltip")
                              .select("#author")
                              .text(d.author);
                            // d3.select("#bookTooltip")
                            //   .select("#noFriends")
                            //   .text(d["commonBooks"]);
                            // d3.select("#bookTooltip")
                            //   .select("#rating")
                            //   .text(d["name"]);
                            // d3.select("#bookTooltip")
                            //   .select("#goodReads")
                            //   .text(d["name"]);
                            d3.select(this).style("background", "rgba(242, 241, 239, 0.2)")
                            //Show the tooltip
                            d3.select("#bookTooltip").classed("hidden", false);
                            lastSelected = i;
                        }//end else

                      });

                    }
            });

            </script>
            <script src="js/functions.js"></script>
        </body>
    </html>